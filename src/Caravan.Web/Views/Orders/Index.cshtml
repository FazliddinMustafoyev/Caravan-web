@using Caravan.Service.ViewModels;
@model PagedList<OrderViewModel>
<div class="row g-10" style="display: flex; justify-content: center">
    @{
        foreach (var order in Model)
        {
            <div class="col-lg-4 card min-h-300px mt-10 me-5 mx-5 shadow-sm" style="width: 300px">
                <div class="mb-5 mt-5">
                    <a asp-controller="orders" asp-action="get" asp-route-orderId="@order.Id">
                        <div class="image-center w-280px h-250px" style="display: flex; justify-content: center">
                            <img src="~/@order.ImagePath" class="card-rounded mw-100 min-w-100 min-h-100 mh-sm-100" />
                        </div>
                    </a>
                    <div class="ms-2 mt-3">
                        <span class="fs-2 fw-bold text-black-800">@order.Name</span>
                    </div>
                    <div class="ms-3">
                        @if (order.IsTaken)
                        {
                            <span class="fs-5 fw-normal text-gray-600">Status: Empty</span>
                        }
                        else
                        {
                            <span class="fs-5 fw-normal text-gray-600">Status: Busy</span>
                        }
                    </div>
                    <div class="d-flex flex-row justify-content-between">
                        <div class="ms-3 row-cols-2">
                            <span class="fs-5 fw-normal text-gray-600">Price: @order.Price so'm </span>
                        </div>
                        <div class="row-cols-2 text-sm-end">
                            <span class="svg-icon svg-icon-primary svg-icon-2x">
                                <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo2/dist/../src/media/svg/icons/Map/Marker1.svg-->
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <rect x="0" y="0" width="24" height="24" />
                                        <path d="M5,10.5 C5,6 8,3 12.5,3 C17,3 20,6.75 20,10.5 C20,12.8325623 17.8236613,16.03566 13.470984,20.1092932 C12.9154018,20.6292577 12.0585054,20.6508331 11.4774555,20.1594925 C7.15915182,16.5078313 5,13.2880005 5,10.5 Z M12.5,12 C13.8807119,12 15,10.8807119 15,9.5 C15,8.11928813 13.8807119,7 12.5,7 C11.1192881,7 10,8.11928813 10,9.5 C10,10.8807119 11.1192881,12 12.5,12 Z" fill="#000000" fill-rule="nonzero" />
                                    </g>
                                </svg><!--end::Svg Icon-->
                            </span>
                            <span class="fs-5 fw-normal text-gray-600">@order.LocationName</span>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
    <div class="mt-10 mb-8">
        @{
            if (Model.MetaData.TotalPages > 1 && Model.MetaData.CurrentPage <= Model.MetaData.TotalPages)
            {
                <ul class="pagination pagination-outline">
                    @{
                        if (@Model.MetaData.HasPrevious)
                        {
                            <li class="page-item previous m-1">
                                <a asp-controller="orders" asp-action="Index" asp-route-page="@(Model.MetaData.CurrentPage-1)" class="page-link"><i class="previous"></i></a>
                            </li>
                        }
                        else
                        {
                            <li class="page-item previous disabled m-1">
                                <a href="#" class="page-link"><i class="previous"></i></a>
                            </li>
                        }
                        if (Model.MetaData.TotalPages > 12)
                        {
                            if (Model.MetaData.CurrentPage == 1)
                            {
                                <li class="page-item active m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="1" class="page-link">1</a></li>
                            }
                            else
                            {
                                <li class="page-item m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="1" class="page-link">1</a></li>
                            }
                            if (Model.MetaData.CurrentPage == 2)
                            {
                                <li class="page-item active m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="2" class="page-link">2</a></li>
                            }
                            else
                            {
                                <li class="page-item m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="2" class="page-link">2</a></li>
                            }
                            if (Model.MetaData.CurrentPage < 8)
                            {
                                for (int _page = 3; _page <= 10; _page++)
                                {

                                    if (_page == Model.MetaData.CurrentPage)
                                    {
                                        <li class="page-item active m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@_page" class="page-link">@_page</a></li>
                                    }
                                    else
                                    {
                                        <li class="page-item m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@_page" class="page-link">@_page</a></li>
                                    }
                                }
                                <li class="page-item disabled"><a class="page-link">...</a></li>
                            }
                            else if (Model.MetaData.CurrentPage >= 8 && Model.MetaData.CurrentPage < Model.MetaData.TotalPages - 7)
                            {
                                <li class="page-item disabled"><a class="page-link">...</a></li>
                                for (int _page = Model.MetaData.CurrentPage - 3; _page <= Model.MetaData.CurrentPage + 3; _page++)
                                {
                                    if (_page == Model.MetaData.CurrentPage)
                                    {
                                        <li class="page-item active m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@_page" class="page-link">@_page</a></li>
                                    }
                                    else
                                    {
                                        <li class="page-item m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@_page" class="page-link">@_page</a></li>
                                    }
                                }
                                <li class="page-item disabled"><a class="page-link">...</a></li>
                            }
                            else if (Model.MetaData.CurrentPage >= Model.MetaData.TotalPages - 7)
                            {
                                <li class="page-item disabled"><a class="page-link">...</a></li>
                                for (int _page = Model.MetaData.TotalPages - 9; _page <= Model.MetaData.TotalPages - 2; _page++)
                                {
                                    if (_page == Model.MetaData.CurrentPage)
                                    {
                                        <li class="page-item active m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@_page" class="page-link">@_page</a></li>
                                    }
                                    else
                                    {
                                        <li class="page-item m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@_page" class="page-link">@_page</a></li>
                                    }
                                }
                            }
                            if (Model.MetaData.TotalPages - 1 == Model.MetaData.CurrentPage)
                            {
                                <li class="page-item active m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@(Model.MetaData.TotalPages - 1)" class="page-link">@(Model.MetaData.TotalPages - 1)</a></li>
                            }
                            else
                            {
                                <li class="page-item m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@(Model.MetaData.TotalPages - 1)" class="page-link">@(Model.MetaData.TotalPages - 1)</a></li>
                            }
                            if (Model.MetaData.TotalPages == Model.MetaData.CurrentPage)
                            {
                                <li class="page-item active m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@Model.MetaData.TotalPages" class="page-link">@Model.MetaData.TotalPages</a></li>
                            }
                            else
                            {
                                <li class="page-item m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@Model.MetaData.TotalPages" class="page-link">@Model.MetaData.TotalPages</a></li>
                            }
                        }
                        else
                        {
                            for (int _page = 1; _page <= Model.MetaData.TotalPages; _page++)
                            {

                                if (_page == Model.MetaData.CurrentPage)
                                {
                                    <li class="page-item active m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@_page" class="page-link">@_page</a></li>
                                }
                                else
                                {
                                    <li class="page-item m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@_page" class="page-link">@_page</a></li>
                                }
                            }
                        }
                        if (Model.MetaData.HasNext)
                        {
                            <li class="page-item next m-1"><a asp-controller="orders" asp-action="Index" asp-route-page="@(Model.MetaData.CurrentPage + 1)" class="page-link"><i class="next"></i></a></li>
                        }
                        else
                        {
                            <li class="page-item next disabled m-1"><a href="#" class="page-link"><i class="next"></i></a></li>
                        }
                    }
                </ul>
            }
        }
    </div>
</div>